<!DOCTYPE html>
<html lang="zh-cn" itemscope itemtype="http://schema.org/WebPage">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>B样条曲线 - 小虎 - Mechanical student,Robot enthusiast</title>
  

<meta name="renderer" content="webkit" />
<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=yes"/>

<meta name="MobileOptimized" content="width"/>
<meta name="HandheldFriendly" content="true"/>


<meta name="applicable-device" content="pc,mobile">

<meta name="theme-color" content="#f8f5ec" />
<meta name="msapplication-navbutton-color" content="#f8f5ec">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#f8f5ec">

<meta name="mobile-web-app-capable" content="yes">

<meta name="author" content="xiaohu" />
  <meta name="description" content="B 样条曲线是在 Bezier 曲线基础上发展起来的一类曲线，它客服了 Bezier 曲线整体控制性所带来的不便，最常用的是二次与三次 B 样条曲线。 1 什么是样条 样条（spl" />

  <meta name="keywords" content="ROS, algorithm, 小虎, 博客, 笔记" />






<meta name="generator" content="Hugo 0.80.0" />


<link rel="canonical" href="https://littlethinking.cn/post/robotics/b%E6%A0%B7%E6%9D%A1%E6%9B%B2%E7%BA%BF/" />





<link rel="icon" href="/favicon.ico" />











<link rel="stylesheet" href="/sass/jane.min.b3a8813c06e6d785beba22bf8264e174fa2cb3a396b22f9ba24e2c00c18aaf7f.css" integrity="sha256-s6iBPAbm14W&#43;uiK/gmThdPoss6OWsi&#43;bok4sAMGKr38=" media="screen" crossorigin="anonymous">





<meta property="og:title" content="B样条曲线" />
<meta property="og:description" content="B 样条曲线是在 Bezier 曲线基础上发展起来的一类曲线，它客服了 Bezier 曲线整体控制性所带来的不便，最常用的是二次与三次 B 样条曲线。 1 什么是样条 样条（spl" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://littlethinking.cn/post/robotics/b%E6%A0%B7%E6%9D%A1%E6%9B%B2%E7%BA%BF/" />
<meta property="article:published_time" content="2019-12-19T16:01:23+08:00" />
<meta property="article:modified_time" content="2019-12-19T16:01:23+08:00" />
<meta itemprop="name" content="B样条曲线">
<meta itemprop="description" content="B 样条曲线是在 Bezier 曲线基础上发展起来的一类曲线，它客服了 Bezier 曲线整体控制性所带来的不便，最常用的是二次与三次 B 样条曲线。 1 什么是样条 样条（spl">
<meta itemprop="datePublished" content="2019-12-19T16:01:23+08:00" />
<meta itemprop="dateModified" content="2019-12-19T16:01:23+08:00" />
<meta itemprop="wordCount" content="4013">



<meta itemprop="keywords" content="Bezier曲线,B样条曲线," />
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="B样条曲线"/>
<meta name="twitter:description" content="B 样条曲线是在 Bezier 曲线基础上发展起来的一类曲线，它客服了 Bezier 曲线整体控制性所带来的不便，最常用的是二次与三次 B 样条曲线。 1 什么是样条 样条（spl"/>

<!--[if lte IE 9]>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js"></script>
<![endif]-->

<!--[if lt IE 9]>
  <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
<![endif]-->


<script type="text/x-mathjax-config">
  MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]}});
</script>

</head>
<body>
  <div id="mobile-navbar" class="mobile-navbar">
  <div class="mobile-header-logo">
    <a href="/" class="logo">小虎</a>
  </div>
  <div class="mobile-navbar-icon">
    <span></span>
    <span></span>
    <span></span>
  </div>
</div>
<nav id="mobile-menu" class="mobile-menu slideout-menu">
  <ul class="mobile-menu-list">
    <li class="mobile-menu-item">
        
          
          
            <a class="menu-item-link" href="https://littlethinking.cn/">主页</a>
          
        
      </li><li class="mobile-menu-item">
        
          
          
            <a class="menu-item-link" href="https://littlethinking.cn/post/">归档</a>
          
        
      </li><li class="mobile-menu-item">
        
          
          
            <a class="menu-item-link" href="https://littlethinking.cn/tags/">标签</a>
          
        
      </li><li class="mobile-menu-item">
        
          
          
            <a class="menu-item-link" href="https://littlethinking.cn/categories/">分类</a>
          
        
      </li><li class="mobile-menu-item">
        
          
          
            <a class="menu-item-link" href="https://littlethinking.cn/about/">关于</a>
          
        
      </li>
    

    
  </ul>
</nav>


  
    






  <link rel="stylesheet" href="/lib/photoswipe/photoswipe.min.css" />
  <link rel="stylesheet" href="/lib/photoswipe/default-skin/default-skin.min.css" />




<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

<div class="pswp__bg"></div>

<div class="pswp__scroll-wrap">
    
    <div class="pswp__container">
      <div class="pswp__item"></div>
      <div class="pswp__item"></div>
      <div class="pswp__item"></div>
    </div>
    
    <div class="pswp__ui pswp__ui--hidden">
    <div class="pswp__top-bar">
      
      <div class="pswp__counter"></div>
      <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
      <button class="pswp__button pswp__button--share" title="Share"></button>
      <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
      <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>
      
      
      <div class="pswp__preloader">
        <div class="pswp__preloader__icn">
          <div class="pswp__preloader__cut">
            <div class="pswp__preloader__donut"></div>
          </div>
        </div>
      </div>
    </div>
    <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
      <div class="pswp__share-tooltip"></div>
    </div>
    <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
    </button>
    <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
    </button>
    <div class="pswp__caption">
      <div class="pswp__caption__center"></div>
    </div>
    </div>
    </div>
</div>

  

  

  

  <header id="header" class="header container">
    <div class="logo-wrapper">
  <a href="/" class="logo">
    
      小虎
    
  </a>
</div>

<nav class="site-navbar">
  <ul id="menu" class="menu">
    
    
        <li class="menu-item">
        
          
          
            <a class="menu-item-link" href="https://littlethinking.cn/">主页</a>
          

        

      </li>
    
        <li class="menu-item">
        
          
          
            <a class="menu-item-link" href="https://littlethinking.cn/post/">归档</a>
          

        

      </li>
    
        <li class="menu-item">
        
          
          
            <a class="menu-item-link" href="https://littlethinking.cn/tags/">标签</a>
          

        

      </li>
    
        <li class="menu-item">
        
          
          
            <a class="menu-item-link" href="https://littlethinking.cn/categories/">分类</a>
          

        

      </li>
    
        <li class="menu-item">
        
          
          
            <a class="menu-item-link" href="https://littlethinking.cn/about/">关于</a>
          

        

      </li>
    

    
    

    
  </ul>
</nav>

  </header>

  <div id="mobile-panel">
    <main id="main" class="main bg-llight">
      <div class="content-wrapper">
        <div id="content" class="content container">
          <article class="post bg-white">
    
    <header class="post-header">
      <h1 class="post-title">B样条曲线</h1>
      
      <div class="post-meta">
        <time datetime="2019-12-19" class="post-time">
          2019-12-19
        </time>
        <div class="post-category">
            <a href="https://littlethinking.cn/categories/%E7%AE%97%E6%B3%95/"> 算法 </a>
            
          </div>
        <span class="more-meta"> 约 4013 字 </span>
          <span class="more-meta"> 预计阅读 9 分钟 </span>

        
        

        
        
      </div>
    </header>

    
    
<div class="post-toc" id="post-toc">
  <h2 class="post-toc-title">文章目录</h2>
  <div class="post-toc-content">
    <nav id="TableOfContents">
  <ul>
    <li><a href="#1-什么是样条">1 什么是样条</a></li>
    <li><a href="#2-bezier-曲线">2 Bezier 曲线</a>
      <ul>
        <li><a href="#21-bezier-曲线介绍">2.1 Bezier 曲线介绍</a></li>
        <li><a href="#22-bezier-曲线定义">2.2 Bezier 曲线定义</a></li>
        <li><a href="#23-bezier-曲线性质">2.3 Bezier 曲线性质</a></li>
        <li><a href="#24-bezier-曲线缺点">2.4 Bezier 曲线缺点</a></li>
      </ul>
    </li>
    <li><a href="#3-b-样条曲线">3 B 样条曲线</a>
      <ul>
        <li><a href="#31-b-样条曲线定义">3.1 B 样条曲线定义</a></li>
        <li><a href="#32-b样条曲线的分类">3.2 B样条曲线的分类</a></li>
        <li><a href="#33-b-样条曲线的绘制">3.3 B 样条曲线的绘制</a></li>
      </ul>
    </li>
    <li><a href="#参考文献">参考文献</a></li>
  </ul>
</nav>
  </div>
</div>

    
    <div class="post-content">
      <p>B 样条曲线是在 Bezier 曲线基础上发展起来的一类曲线，它客服了 Bezier 曲线整体控制性所带来的不便，最常用的是二次与三次 B 样条曲线。</p>
<h2 id="1-什么是样条">1 什么是样条</h2>
<p>样条（spline）二字，是从英文翻译过来的。</p>
<ul>
<li>实际应用中，样条是一根富有弹性的细木条或塑料条。在应用 CAD/CAM 技术以前，航空、船舶和汽车制造业普遍采用手工绘制自由曲线。绘图时用压铁使样条通过指定的形值点（样点），再适当地调整压铁，改变样条形态，直到符合设计要求。所以在绘图术语中，样条是通过一组指定点集而生成平滑曲线的柔性带。样条曲线（spline curve）原指用这种方式绘制的曲线。</li>
<li>从力学角度考虑，样条可看做一弹性细梁，压铁是作用在梁上的集中载荷。由此，设计样条曲线的过程可抽象为：求弹性细梁在外加集中载荷作用下产生的弯曲变形。</li>
<li>在数学上使用分段的三次多项式函数来描绘这种曲线，其中各曲线段的连接处有连续的一次和二次导数。</li>
<li>在计算机图形学中，样条曲线指由多项式曲线段连接而成的曲线，在每段的边界处满足特定的连续性条件。</li>
</ul>
<h2 id="2-bezier-曲线">2 Bezier 曲线</h2>
<h3 id="21-bezier-曲线介绍">2.1 Bezier 曲线介绍</h3>
<p>贝塞尔曲线是这样的一条曲线，它是依据四个位置任意的点坐标绘制出的一条光滑曲线。在历史上，研究贝塞尔曲线的人最初是按照已知曲线参数方程来确定四个点的思路设计出这种矢量曲线绘制法。1962 年，法国数学家 Pierre Bézier 第一个研究了这种矢量绘制曲线的方法，并给出了详细的计算公式，因此按照这样的公式绘制出来的曲线就用他的姓氏来命名是为贝塞尔曲线。</p>
<h3 id="22-bezier-曲线定义">2.2 Bezier 曲线定义</h3>
<p>给定空间<em>n+1</em>个控制顶点$P_{i}(i=0 \rightarrow n)$，则 Bezier 曲线定义为：
$$
p(t)= \sum_{i=1}^{n} P_{i}B_{i,n}(t) \qquad  i \in [0,1]
$$
其中：$B_{i,n}(t)$称为基函数
$$
B_{i,n}(t)=\frac{n!}{i!(n-i)!}t^{i}(1-t)^{n-i}=C_{n}^{i}t^{i}(1-t)^{n-i}
$$</p>
<h3 id="23-bezier-曲线性质">2.3 Bezier 曲线性质</h3>
<ul>
<li>
<p>端点性质：</p>
<p>a) $p(0)=P_{0},p(1)=P_{n}$，即曲线过而二端点；</p>
<p>b) $p'(0)=n(P_{1}-P_{0}),p'(1)=n(P_{n}-P_{n-1})$，即在二端点与控制多边形相切。</p>
</li>
<li>
<p>凸包性：Bezier 曲线完成落在控制多边形的凸包内。</p>
</li>
<li>
<p>对称性：由$P_{i}$与$P_{n-i}$组成的曲线,位置一致，方向相反。</p>
</li>
<li>
<p>几何不变性：Bezier 曲线的形状仅仅与控制多边形各个顶点的相对位置有关，而与坐标系的选择无关。</p>
</li>
<li>
<p>变差缩减性：若 Bezier 曲线的特征多边形是一个平面图形，则平面内任意直线与$p(t)$的交点个数不多于该直线与其特征多边形的交点个数，这一性质叫做变差缩减性质。</p>
<p>此性质反应了 Bezier 曲线 比其特征多边形的波动还小，也就是说Bezier 曲线比特征多边形的折线更光顺。</p>
</li>
</ul>
<p>Bezier 曲线的递推公式（de Casteljau 算法）
$$
\begin{equation}
P_{i}^{k} =
\begin{cases}
P_{i} &amp; k=0 \<br>
(1-t)P_{i}^{k-1} + tP_{i+1}^{k-1} &amp; k=1,2,&hellip;,n \quad i=0,1,&hellip;,n-k
\end{cases}
\end{equation}
$$
de Casteljau 算法稳定可靠，直观简便，可以编出十分简便的程序，是计算 Bezier 曲线的基本算法和标准算法。</p>
<h3 id="24-bezier-曲线缺点">2.4 Bezier 曲线缺点</h3>
<p>Bezier 曲线在外形设计的应用中存在一些具体的不足之处。主要有一下三点：</p>
<ul>
<li>确定了多边形的顶点数（n个），也就决定了所定义的Bezier曲线的阶次（n-1次），这样很不灵活；</li>
<li>当顶点数（n）较大时，曲线的阶次将比较高。此时，多边形对曲线形状的控制将明显减弱；</li>
<li>Bezier 的调和函数的值，在开区间$(0,1)$内均不为0。因此，所定义的曲线在$(0&lt;t&lt;1)$的区间内的任何一点均要受到全部顶点的影响，即改变其中任一个顶点的位置，都将对整条曲线产生影响，因此对曲线进行局部修改是不可能的。</li>
</ul>
<h2 id="3-b-样条曲线">3 B 样条曲线</h2>
<p>为了克服在 Bezier 曲线中存在的问题，Gordon、Riesenfeld 和 Forrest 等人拓展了 Bezier 曲线，用 n 次 B 样条基函数替换了伯恩斯坦基函数，构造了 B 样条曲线。B样条曲线除了保持 Bezier 曲线所具有的优点外，还增加了可以对曲线进行局部修改这一突出的优点。除此之外，它还具有对特征多边形更逼近以及多项式阶次较低等优点。因此，B 样条曲线在外形设计中得到了更广泛的重视和应用。</p>
<h3 id="31-b-样条曲线定义">3.1 B 样条曲线定义</h3>
<p>B 样条曲线方程可写为：
$$
p(u)=\sum_{i=0}^{n}P_{i}N_{i,k}(u)
$$
其中，$P_{i}(i=0 \rightarrow n )$为控制顶点（坐标），$N_{i,k}(i=0 \rightarrow n)$为$k$次规范B样条基函数，最高次数为$k$。基函数是由一个节点矢量的非递减参数$u$的序列$U:u_{0} \leq u_{1} \leq &hellip; \leq u_{n+k+1}$所决定的$k$次多项式。</p>
<p>B 样条的基函数通常采用Cox-deBoor递推公式：</p>
<p>$$
\begin{cases}
N_{i,0}(u)=\begin{cases}
1 &amp; \mbox{if } u_{i} \leq u \leq u_{i+1}  \<br>
0 &amp; \mbox{others}
\end{cases} \<br>
N_{i,k}(u)=\frac{u-u_{i}}{u_{i+k}-u_{i}}N_{i,k-1}(u)+\frac{u_{i+k+1}-u}{u_{i+k+1}-u_{i+1}}N_{i+1,k-1}(u) \<br>
\mbox{define } \frac{0}{0} = 0
\end{cases}
$$
上式中，$i$为节点序号，$k$为基函数的次数，共有$n+1$个控制点。注意区分节点和控制顶点，节点是在节点矢量$U$中取得，控制顶点则是坐标点，决定B样条的控制多边形。Cox-deBoor递推公式是B样条曲线的定义的核心，该部分在程序中实现可采用递归的方式。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-matlab" data-lang="matlab"><span class="c">% BaseFunction.m文件</span>
<span class="k">function</span><span class="w"> </span>Nik_u <span class="p">=</span><span class="w"> </span><span class="nf">BaseFunction</span><span class="p">(</span>i, k , u, NodeVector<span class="p">)</span><span class="w">
</span><span class="w"></span><span class="c">% 计算基函数Ni,k(u),NodeVector为节点向量</span>

<span class="k">if</span> <span class="n">k</span> <span class="o">==</span> <span class="mi">0</span>       <span class="c">% 0次B样条</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">u</span> <span class="o">&gt;</span><span class="p">=</span> <span class="n">NodeVector</span><span class="p">(</span><span class="nb">i</span><span class="o">+</span><span class="mi">1</span><span class="p">))</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="n">u</span> <span class="o">&lt;</span> <span class="n">NodeVector</span><span class="p">(</span><span class="nb">i</span><span class="o">+</span><span class="mi">2</span><span class="p">))</span>
        <span class="n">Nik_u</span> <span class="p">=</span> <span class="mf">1.0</span><span class="p">;</span>
    <span class="k">else</span>
        <span class="n">Nik_u</span> <span class="p">=</span> <span class="mf">0.0</span><span class="p">;</span>
    <span class="k">end</span>
<span class="k">else</span>
    <span class="n">Length1</span> <span class="p">=</span> <span class="n">NodeVector</span><span class="p">(</span><span class="nb">i</span><span class="o">+</span><span class="n">k</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span> <span class="o">-</span> <span class="n">NodeVector</span><span class="p">(</span><span class="nb">i</span><span class="o">+</span><span class="mi">1</span><span class="p">);</span>
    <span class="n">Length2</span> <span class="p">=</span> <span class="n">NodeVector</span><span class="p">(</span><span class="nb">i</span><span class="o">+</span><span class="n">k</span><span class="o">+</span><span class="mi">2</span><span class="p">)</span> <span class="o">-</span> <span class="n">NodeVector</span><span class="p">(</span><span class="nb">i</span><span class="o">+</span><span class="mi">2</span><span class="p">);</span>      <span class="c">% 支撑区间的长度</span>
    <span class="k">if</span> <span class="n">Length1</span> <span class="o">==</span> <span class="mf">0.0</span>       <span class="c">% 规定0/0 = 0</span>
        <span class="n">Length1</span> <span class="p">=</span> <span class="mf">1.0</span><span class="p">;</span>
    <span class="k">end</span>
    <span class="k">if</span> <span class="n">Length2</span> <span class="o">==</span> <span class="mf">0.0</span>
        <span class="n">Length2</span> <span class="p">=</span> <span class="mf">1.0</span><span class="p">;</span>
    <span class="k">end</span>
    <span class="n">Nik_u</span> <span class="p">=</span> <span class="p">(</span><span class="n">u</span> <span class="o">-</span> <span class="n">NodeVector</span><span class="p">(</span><span class="nb">i</span><span class="o">+</span><span class="mi">1</span><span class="p">))</span> <span class="o">/</span> <span class="n">Length1</span> <span class="o">*</span> <span class="n">BaseFunction</span><span class="p">(</span><span class="nb">i</span><span class="p">,</span> <span class="n">k</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="n">u</span><span class="p">,</span> <span class="n">NodeVector</span><span class="p">)</span> <span class="c">...</span>
        <span class="o">+</span> <span class="p">(</span><span class="n">NodeVector</span><span class="p">(</span><span class="nb">i</span><span class="o">+</span><span class="n">k</span><span class="o">+</span><span class="mi">2</span><span class="p">)</span> <span class="o">-</span> <span class="n">u</span><span class="p">)</span> <span class="o">/</span> <span class="n">Length2</span> <span class="o">*</span> <span class="n">BaseFunction</span><span class="p">(</span><span class="nb">i</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="n">k</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="n">u</span><span class="p">,</span> <span class="n">NodeVector</span><span class="p">);</span>
<span class="k">end</span>
</code></pre></td></tr></table>
</div>
</div><p>所给程序可用于计算基函数$N_{i,k}(u)$的值，程序中对不同类型的B样条曲线区别在于节点矢量 NodeVector 的取值不同。</p>
<h3 id="32-b样条曲线的分类">3.2 B样条曲线的分类</h3>
<p>根据节点矢量中节点的分布情况不同，可以划分4种类型的B样条曲线。不同类型的B样条曲线区别主要在于节点矢量，对于具有$n+1$个控制顶点$(P_{0},P_{1},&hellip;,P_{n})$的 $k $次B样条曲线，无论是哪种类型都具有$n+k+2$个节点$[u_{0},u_{1},&hellip;,u_{n+k+2}]$。</p>
<ul>
<li>
<p><strong>均匀B样条曲线</strong></p>
<p>节点矢量中节点为沿参数轴均匀或等距分布。</p>
</li>
<li>
<p><strong>准均匀B样条曲线</strong></p>
<p>其节点矢量中两端节点具有重复度$k+1$，即$u_{0}=u_{1}=&hellip;=u_{k}$，$u_{n+1}=u_{n+2}=&hellip;=u_{n+k+1}$，所有的内节点均匀分布，具有重复度1。</p>
</li>
<li>
<p><strong>分段Bezier曲线</strong></p>
<p>其节点矢量中两端节点的重复度与类型2相同，为$k+1$。不同的是内节点重复度为$k$。该类型有限制条件，控制顶点数减1必须等于次数的正整数倍，即$\frac{n}{k}=正整数$。</p>
</li>
<li>
<p><strong>一般非均匀B样条曲线</strong></p>
<p>对任意分布的节点矢量$U=[u_{0},u_{1},&hellip;,u_{n+k+1}]$，只要在数学上成立都可选取。</p>
</li>
</ul>
<h3 id="33-b-样条曲线的绘制">3.3 B 样条曲线的绘制</h3>
<h4 id="331-节点矢量的确定">3.3.1 节点矢量的确定</h4>
<p>不同类型的 B 样条曲线区别主要在于节点矢量，对于具有$n+1$个控制顶点$(P_{0},P_{1},&hellip;,P_{n})$的 $k$ 次B样条曲线，无论是哪种类型都具有$n+k+2$个节点$([u_{0},u_{1}&hellip;u_{n+k+1}])$。</p>
<p><img src="/images/robotics/B%E6%A0%B7%E6%9D%A1%E6%9B%B2%E7%BA%BF/20150510153754214.jpg" alt="20150510153754214"></p>
<p>根据图示，三种类型的B样条曲线对应的节点矢量分别为： 
$$
[0 \ \frac{1}{7} \ \frac{2}{7} \ \frac{3}{7} \ \frac{4}{7} \ \frac{5}{7} \ \frac{6}{7} \ 1] \<br>
[0 \ 0 \ 0 \ \frac{1}{3} \ \frac{2}{3} 1 \ 1 \ 1] \<br>
[0 \ 0 \ 0 \ \frac{1}{2} \ \frac{1}{2} 1 \ 1 \ 1] 
$$
需要注意的是分段Bezier曲线必须满足$\frac{n}{k}=正整数$。</p>
<p>这里给出准均匀B样条和分段Bezier曲线的生成节点矢量的代码，均匀B样条的很简单就不列出了。假设共n+1个控制顶点，k次B样条，输入参数为 n, k ，输出节点矢量NodeVector。</p>
<p>准均匀B样条曲线的节点矢量生成：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-matlab" data-lang="matlab"><span class="c">% U_quasi_uniform.m文件</span>
<span class="k">function</span><span class="w"> </span>NodeVector <span class="p">=</span><span class="w"> </span><span class="nf">U_quasi_uniform</span><span class="p">(</span>n, k<span class="p">)</span><span class="w">
</span><span class="w"></span><span class="c">% 准均匀B样条的节点向量计算，共n+1个控制顶点，k次B样条</span>
<span class="n">NodeVector</span> <span class="p">=</span> <span class="nb">zeros</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">n</span><span class="o">+</span><span class="n">k</span><span class="o">+</span><span class="mi">2</span><span class="p">);</span>
<span class="n">piecewise</span> <span class="p">=</span> <span class="n">n</span> <span class="o">-</span> <span class="n">k</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span>       <span class="c">% 曲线的段数</span>
<span class="k">if</span> <span class="n">piecewise</span> <span class="o">==</span> <span class="mi">1</span>       <span class="c">% 只有一段曲线时，n = k</span>
    <span class="k">for</span> <span class="nb">i</span> <span class="p">=</span> <span class="n">n</span><span class="o">+</span><span class="mi">2</span> <span class="p">:</span> <span class="n">n</span><span class="o">+</span><span class="n">k</span><span class="o">+</span><span class="mi">2</span>
        <span class="n">NodeVector</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="nb">i</span><span class="p">)</span> <span class="p">=</span> <span class="mi">1</span><span class="p">;</span>
    <span class="k">end</span>
<span class="k">else</span>
    <span class="n">flag</span> <span class="p">=</span> <span class="mi">1</span><span class="p">;</span>       <span class="c">% 不止一段曲线时</span>
    <span class="k">while</span> <span class="n">flag</span> <span class="o">~=</span> <span class="n">piecewise</span>
        <span class="n">NodeVector</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">k</span><span class="o">+</span><span class="mi">1</span><span class="o">+</span><span class="n">flag</span><span class="p">)</span> <span class="p">=</span> <span class="n">NodeVector</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">k</span> <span class="o">+</span> <span class="n">flag</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span><span class="o">/</span><span class="n">piecewise</span><span class="p">;</span>
        <span class="n">flag</span> <span class="p">=</span> <span class="n">flag</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span>
    <span class="k">end</span>
    <span class="n">NodeVector</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">n</span><span class="o">+</span><span class="mi">2</span> <span class="p">:</span> <span class="n">n</span><span class="o">+</span><span class="n">k</span><span class="o">+</span><span class="mi">2</span><span class="p">)</span> <span class="p">=</span> <span class="mi">1</span><span class="p">;</span>
<span class="k">end</span>
</code></pre></td></tr></table>
</div>
</div><p>分段Bezier曲线的节点矢量生成：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-matlab" data-lang="matlab"><span class="c">% U_piecewise_Bezier.m文件</span>
<span class="k">function</span><span class="w"> </span>NodeVector <span class="p">=</span><span class="w"> </span><span class="nf">U_piecewise_Bezier</span><span class="p">(</span>n, k<span class="p">)</span><span class="w">
</span><span class="w"></span><span class="c">% 分段Bezier曲线的节点向量计算，共n+1个控制顶点，k次B样条</span>
<span class="c">% 分段Bezier端节点重复度为k+1，内间节点重复度为k,且满足n/k为正整数</span>

<span class="k">if</span> <span class="o">~</span><span class="nb">mod</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="n">k</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="o">~</span><span class="nb">mod</span><span class="p">(</span><span class="n">k</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="n">k</span><span class="o">&gt;</span><span class="p">=</span><span class="mi">1</span><span class="p">)</span>   <span class="c">% 满足n是k的整数倍且k为正整数</span>
    <span class="n">NodeVector</span> <span class="p">=</span> <span class="nb">zeros</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">n</span><span class="o">+</span><span class="n">k</span><span class="o">+</span><span class="mi">2</span><span class="p">);</span>   <span class="c">% 节点矢量长度为n+k+2</span>
    <span class="n">NodeVector</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">n</span><span class="o">+</span><span class="mi">2</span> <span class="p">:</span> <span class="n">n</span><span class="o">+</span><span class="n">k</span><span class="o">+</span><span class="mi">2</span><span class="p">)</span> <span class="p">=</span> <span class="nb">ones</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">k</span><span class="o">+</span><span class="mi">1</span><span class="p">);</span>  <span class="c">% 右端节点置1</span>

    <span class="n">piecewise</span> <span class="p">=</span> <span class="n">n</span> <span class="o">/</span> <span class="n">k</span><span class="p">;</span>      <span class="c">% 设定内节点的值</span>
    <span class="n">Flg</span> <span class="p">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="k">if</span> <span class="n">piecewise</span> <span class="o">&gt;</span> <span class="mi">1</span>
        <span class="k">for</span> <span class="nb">i</span> <span class="p">=</span> <span class="mi">2</span> <span class="p">:</span> <span class="n">piecewise</span>
            <span class="k">for</span> <span class="nb">j</span> <span class="p">=</span> <span class="mi">1</span> <span class="p">:</span> <span class="n">k</span>
                <span class="n">NodeVector</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">k</span><span class="o">+</span><span class="mi">1</span> <span class="o">+</span> <span class="n">Flg</span><span class="o">*</span><span class="n">k</span><span class="o">+</span><span class="nb">j</span><span class="p">)</span> <span class="p">=</span> <span class="p">(</span><span class="nb">i</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span><span class="o">/</span><span class="n">piecewise</span><span class="p">;</span>
            <span class="k">end</span>
            <span class="n">Flg</span> <span class="p">=</span> <span class="n">Flg</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span>
        <span class="k">end</span>
    <span class="k">end</span>

<span class="k">else</span>
    <span class="n">fprintf</span><span class="p">(</span><span class="s">&#39;error!\n&#39;</span><span class="p">);</span>
<span class="k">end</span>
</code></pre></td></tr></table>
</div>
</div><h4 id="332-b样条曲线的绘制">3.3.2 B样条曲线的绘制</h4>
<p>根据B样条曲线的定义公式，曲线上任一点坐标值是参数变量$u$的函数，用矩阵形式表示
$$
p(u)=(P_{0} \quad P_{1} \quad &hellip; \quad P_{n}   )\begin{pmatrix}
(N_{0,k} (u) \<br>
(N_{1,k} (u) \<br>
\vdots  \<br>
(N_{n,k} (u)
\end{pmatrix}
$$
只需要确定控制顶点$d_{i}$、曲线的次数$k$ 以及基函数$N_{i,k}(u)$，就完全确定了曲线。</p>
<p>B样条曲线的绘制函数：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-matlab" data-lang="matlab"><span class="c">% DrawSpline.m文件</span>
<span class="k">function</span><span class="w"> </span><span class="nf">DrawSpline</span><span class="p">(</span>n, k, P, NodeVector<span class="p">)</span><span class="w">
</span><span class="w"></span><span class="c">% B样条的绘图函数</span>
<span class="c">% 已知n+1个控制顶点P(i), k次B样条，P是2*(n+1)矩阵存控制顶点坐标, 节点向量NodeVector</span>
<span class="n">plot</span><span class="p">(</span><span class="n">P</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">:</span><span class="n">n</span><span class="o">+</span><span class="mi">1</span><span class="p">),</span> <span class="n">P</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">:</span><span class="n">n</span><span class="o">+</span><span class="mi">1</span><span class="p">),</span><span class="c">...</span>
                    <span class="s">&#39;o&#39;</span><span class="p">,</span><span class="s">&#39;LineWidth&#39;</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="c">...</span>
                    <span class="s">&#39;MarkerEdgeColor&#39;</span><span class="p">,</span><span class="s">&#39;k&#39;</span><span class="p">,</span><span class="c">...</span>
                    <span class="s">&#39;MarkerFaceColor&#39;</span><span class="p">,</span><span class="s">&#39;g&#39;</span><span class="p">,</span><span class="c">...</span>
                    <span class="s">&#39;MarkerSize&#39;</span><span class="p">,</span><span class="mi">6</span><span class="p">);</span>
<span class="n">line</span><span class="p">(</span><span class="n">P</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">:</span><span class="n">n</span><span class="o">+</span><span class="mi">1</span><span class="p">),</span> <span class="n">P</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">:</span><span class="n">n</span><span class="o">+</span><span class="mi">1</span><span class="p">));</span>
<span class="n">Nik</span> <span class="p">=</span> <span class="nb">zeros</span><span class="p">(</span><span class="n">n</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
<span class="k">for</span> <span class="n">u</span> <span class="p">=</span> <span class="mi">0</span> <span class="p">:</span> <span class="mf">0.005</span> <span class="p">:</span> <span class="mi">1</span><span class="o">-</span><span class="mf">0.005</span>
    <span class="k">for</span> <span class="nb">i</span> <span class="p">=</span> <span class="mi">0</span> <span class="p">:</span> <span class="mi">1</span> <span class="p">:</span> <span class="n">n</span>
        <span class="n">Nik</span><span class="p">(</span><span class="nb">i</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span> <span class="p">=</span> <span class="n">BaseFunction</span><span class="p">(</span><span class="nb">i</span><span class="p">,</span> <span class="n">k</span> <span class="p">,</span> <span class="n">u</span><span class="p">,</span> <span class="n">NodeVector</span><span class="p">);</span>
    <span class="k">end</span>
    <span class="n">p_u</span> <span class="p">=</span> <span class="n">P</span> <span class="o">*</span> <span class="n">Nik</span><span class="p">;</span>
    <span class="k">if</span> <span class="n">u</span> <span class="o">==</span> <span class="mi">0</span>
        <span class="n">tempx</span> <span class="p">=</span> <span class="n">p_u</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">);</span>
        <span class="n">tempy</span> <span class="p">=</span> <span class="n">p_u</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">1</span><span class="p">);</span>
        <span class="n">line</span><span class="p">([</span><span class="n">tempx</span> <span class="n">p_u</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">)],</span> <span class="p">[</span><span class="n">tempy</span> <span class="n">p_u</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">1</span><span class="p">)],</span><span class="c">...</span>
            <span class="s">&#39;Marker&#39;</span><span class="p">,</span><span class="s">&#39;.&#39;</span><span class="p">,</span><span class="s">&#39;LineStyle&#39;</span><span class="p">,</span><span class="s">&#39;-&#39;</span><span class="p">,</span> <span class="s">&#39;Color&#39;</span><span class="p">,[.</span><span class="mi">3</span> <span class="p">.</span><span class="mi">6</span> <span class="p">.</span><span class="mi">9</span><span class="p">],</span> <span class="s">&#39;LineWidth&#39;</span><span class="p">,</span><span class="mi">3</span><span class="p">);</span>
    <span class="k">else</span>
        <span class="n">line</span><span class="p">([</span><span class="n">tempx</span> <span class="n">p_u</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">)],</span> <span class="p">[</span><span class="n">tempy</span> <span class="n">p_u</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">1</span><span class="p">)],</span><span class="c">...</span>
            <span class="s">&#39;Marker&#39;</span><span class="p">,</span><span class="s">&#39;.&#39;</span><span class="p">,</span><span class="s">&#39;LineStyle&#39;</span><span class="p">,</span><span class="s">&#39;-&#39;</span><span class="p">,</span> <span class="s">&#39;Color&#39;</span><span class="p">,[.</span><span class="mi">3</span> <span class="p">.</span><span class="mi">6</span> <span class="p">.</span><span class="mi">9</span><span class="p">],</span> <span class="s">&#39;LineWidth&#39;</span><span class="p">,</span><span class="mi">3</span><span class="p">);</span>
        <span class="n">tempx</span> <span class="p">=</span> <span class="n">p_u</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">);</span>
        <span class="n">tempy</span> <span class="p">=</span> <span class="n">p_u</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">1</span><span class="p">);</span>
    <span class="k">end</span>
<span class="k">end</span>
</code></pre></td></tr></table>
</div>
</div><p>调用 <code>DrawSpline(n, k, P, NodeVector)</code> 函数就能绘制曲线，注意输入变量要正确。</p>
<p>下面给出绘制三种不同B样条曲线的命令流，可以参考比较每种类型之间的区别。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-matlab" data-lang="matlab"><span class="c">% 绘制三种类型的B样条曲线，需要前面所给的所有.m文件</span>
<span class="n">clear</span> <span class="n">all</span><span class="p">;</span>
<span class="c">%控制顶点</span>
<span class="n">P</span> <span class="p">=</span> <span class="p">[</span><span class="mf">9.036145</span><span class="p">,</span> <span class="mf">21.084337</span><span class="p">,</span> <span class="mf">37.607573</span><span class="p">,</span> <span class="mf">51.893287</span><span class="p">,</span> <span class="mf">61.187608</span><span class="p">;</span>
    <span class="mf">51.779661</span><span class="p">,</span> <span class="mf">70.084746</span><span class="p">,</span> <span class="mf">50.254237</span><span class="p">,</span> <span class="mf">69.745763</span><span class="p">,</span> <span class="mf">49.576271</span><span class="p">];</span>

<span class="n">n</span> <span class="p">=</span> <span class="mi">4</span><span class="p">;</span> <span class="n">k</span> <span class="p">=</span> <span class="mi">2</span><span class="p">;</span>

<span class="n">flag</span> <span class="p">=</span> <span class="mi">2</span><span class="p">;</span>
<span class="c">% flag = 1，绘制均匀B样条曲线</span>
<span class="c">% flag = 2, 绘制准均匀B样条曲线</span>
<span class="c">% flag = 3, 绘制分段Bezier曲线</span>

<span class="k">switch</span> <span class="n">flag</span>
    <span class="k">case</span> <span class="mi">1</span>
        <span class="n">NodeVector</span> <span class="p">=</span> <span class="nb">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">n</span><span class="o">+</span><span class="n">k</span><span class="o">+</span><span class="mi">2</span><span class="p">);</span> <span class="c">% 均匀B样条的节点矢量</span>

        <span class="c">% 绘制样条曲线</span>
        <span class="n">plot</span><span class="p">(</span><span class="n">P</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">:</span><span class="n">n</span><span class="o">+</span><span class="mi">1</span><span class="p">),</span> <span class="n">P</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">:</span><span class="n">n</span><span class="o">+</span><span class="mi">1</span><span class="p">),</span><span class="c">...</span>
                        <span class="s">&#39;o&#39;</span><span class="p">,</span><span class="s">&#39;LineWidth&#39;</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="c">...</span>
                        <span class="s">&#39;MarkerEdgeColor&#39;</span><span class="p">,</span><span class="s">&#39;k&#39;</span><span class="p">,</span><span class="c">...</span>
                        <span class="s">&#39;MarkerFaceColor&#39;</span><span class="p">,</span><span class="s">&#39;g&#39;</span><span class="p">,</span><span class="c">...</span>
                        <span class="s">&#39;MarkerSize&#39;</span><span class="p">,</span><span class="mi">6</span><span class="p">);</span>
        <span class="n">line</span><span class="p">(</span><span class="n">P</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">:</span><span class="n">n</span><span class="o">+</span><span class="mi">1</span><span class="p">),</span> <span class="n">P</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">:</span><span class="n">n</span><span class="o">+</span><span class="mi">1</span><span class="p">));</span>
        <span class="n">Nik</span> <span class="p">=</span> <span class="nb">zeros</span><span class="p">(</span><span class="n">n</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
        <span class="k">for</span> <span class="n">u</span> <span class="p">=</span> <span class="n">k</span><span class="o">/</span><span class="p">(</span><span class="n">n</span><span class="o">+</span><span class="n">k</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span> <span class="p">:</span> <span class="mf">0.001</span> <span class="p">:</span> <span class="p">(</span><span class="n">n</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span><span class="o">/</span><span class="p">(</span><span class="n">n</span><span class="o">+</span><span class="n">k</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span>
            <span class="c">% for u = 0 : 0.005 : 1</span>
            <span class="k">for</span> <span class="nb">i</span> <span class="p">=</span> <span class="mi">0</span> <span class="p">:</span> <span class="mi">1</span> <span class="p">:</span> <span class="n">n</span>
                <span class="n">Nik</span><span class="p">(</span><span class="nb">i</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span> <span class="p">=</span> <span class="n">BaseFunction</span><span class="p">(</span><span class="nb">i</span><span class="p">,</span> <span class="n">k</span> <span class="p">,</span> <span class="n">u</span><span class="p">,</span> <span class="n">NodeVector</span><span class="p">);</span>
            <span class="k">end</span>
        <span class="n">p_u</span> <span class="p">=</span> <span class="n">P</span> <span class="o">*</span> <span class="n">Nik</span><span class="p">;</span>
        <span class="n">line</span><span class="p">(</span><span class="n">p_u</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span> <span class="n">p_u</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span> <span class="s">&#39;Marker&#39;</span><span class="p">,</span><span class="s">&#39;.&#39;</span><span class="p">,</span><span class="s">&#39;LineStyle&#39;</span><span class="p">,</span><span class="s">&#39;-&#39;</span><span class="p">,</span> <span class="s">&#39;Color&#39;</span><span class="p">,[.</span><span class="mi">3</span> <span class="p">.</span><span class="mi">6</span> <span class="p">.</span><span class="mi">9</span><span class="p">]);</span>
        <span class="k">end</span>
    <span class="k">case</span> <span class="mi">2</span>
        <span class="n">NodeVector</span> <span class="p">=</span> <span class="n">U_quasi_uniform</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="n">k</span><span class="p">);</span> <span class="c">% 准均匀B样条的节点矢量</span>
        <span class="n">DrawSpline</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="n">k</span><span class="p">,</span> <span class="n">P</span><span class="p">,</span> <span class="n">NodeVector</span><span class="p">);</span>
    <span class="k">case</span> <span class="mi">3</span>
        <span class="n">NodeVector</span> <span class="p">=</span> <span class="n">U_piecewise_Bezier</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="n">k</span><span class="p">);</span>  <span class="c">% 分段Bezier曲线的节点矢量</span>
        <span class="n">DrawSpline</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="n">k</span><span class="p">,</span> <span class="n">P</span><span class="p">,</span> <span class="n">NodeVector</span><span class="p">);</span>
    <span class="k">otherwise</span>
        <span class="n">fprintf</span><span class="p">(</span><span class="s">&#39;error!\n&#39;</span><span class="p">);</span>
<span class="k">end</span>
</code></pre></td></tr></table>
</div>
</div><p>三种类型的B样条曲线</p>
<ul>
<li>
<p>均匀B样条曲线</p>
<p><img src="/images/robotics/B%E6%A0%B7%E6%9D%A1%E6%9B%B2%E7%BA%BF/20150510172723541.jpg" alt="20150510172723541"></p>
</li>
<li>
<p>准均匀B样条曲线</p>
<p><img src="/images/robotics/B%E6%A0%B7%E6%9D%A1%E6%9B%B2%E7%BA%BF/20150510173020071.jpg" alt="20150510173020071"></p>
</li>
<li>
<p>分段Bezier曲线</p>
<p><img src="/images/robotics/B%E6%A0%B7%E6%9D%A1%E6%9B%B2%E7%BA%BF/20150510172707221.jpg" alt="20150510172707221"></p>
</li>
</ul>
<h2 id="参考文献">参考文献</h2>
<p>[1] <a href="https://blog.csdn.net/Mr_Grit/article/details/45603627">https://blog.csdn.net/Mr_Grit/article/details/45603627</a></p>

    </div>

    
    
<div class="post-copyright">
  <p class="copyright-item">
    <span class="item-title">文章作者</span>
    <span class="item-content">xiaohu</span>
  </p>
  <p class="copyright-item">
    <span class="item-title">上次更新</span>
    <span class="item-content">
      2019-12-19
      
    </span>
  </p>
  
  <p class="copyright-item">
    <span class="item-title">许可协议</span>
    <span class="item-content">原创文章，如需转载请注明文章作者和出处。谢谢！</span>
  </p>
</div>


    
    

    <footer class="post-footer">
      <div class="post-tags">
          <a href="https://littlethinking.cn/tags/bezier%E6%9B%B2%E7%BA%BF/">Bezier曲线</a>
          <a href="https://littlethinking.cn/tags/b%E6%A0%B7%E6%9D%A1%E6%9B%B2%E7%BA%BF/">B样条曲线</a>
          
        </div>

      
      <nav class="post-nav">
        
          <a class="prev" href="/post/robotics/%E5%B9%B2%E8%B4%A7_01%E4%BB%8Erp%E5%85%B3%E8%8A%82%E5%85%A5%E9%97%A8%E6%9C%BA%E5%99%A8%E4%BA%BA%E5%AD%A6/">
            
            <i class="iconfont">
              <svg  class="icon" viewBox="0 0 1024 1024" version="1.1"
  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
  width="18" height="18">
  <path d="M691.908486 949.511495l75.369571-89.491197c10.963703-12.998035 10.285251-32.864502-1.499144-44.378743L479.499795 515.267417 757.434875 204.940602c11.338233-12.190647 11.035334-32.285311-0.638543-44.850487l-80.46666-86.564541c-11.680017-12.583596-30.356378-12.893658-41.662889-0.716314L257.233596 494.235404c-11.332093 12.183484-11.041474 32.266891 0.657986 44.844348l80.46666 86.564541c1.772366 1.910513 3.706415 3.533476 5.750981 4.877077l306.620399 321.703933C662.505829 963.726242 680.945807 962.528973 691.908486 949.511495z"></path>
</svg>

            </i>
            <span class="prev-text nav-default">【机器人学基础知识】1、从RP关节入门机器人学</span>
            <span class="prev-text nav-mobile">上一篇</span>
          </a>
        
      </nav>
    </footer>
  </article>

  
  

  
  

  

  
  

  

  

  

    

  

        </div>
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="icon-links">
  
  
    <a href="mailto:hust.chen@foxmail.com" rel="me noopener" class="iconfont"
      title="email" >
      <svg class="icon" viewBox="0 0 1451 1024" version="1.1"
  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
  width="36" height="36">
  <path d="M664.781909 681.472759 0 97.881301C0 3.997201 71.046997 0 71.046997 0L474.477909 0 961.649408 0 1361.641813 0C1361.641813 0 1432.688811 3.997201 1432.688811 97.881301L771.345323 681.472759C771.345323 681.472759 764.482731 685.154773 753.594283 688.65053L753.594283 688.664858C741.602731 693.493018 729.424896 695.068979 718.077952 694.839748 706.731093 695.068979 694.553173 693.493018 682.561621 688.664858L682.561621 688.65053C671.644501 685.140446 664.781909 681.472759 664.781909 681.472759L664.781909 681.472759ZM718.063616 811.603883C693.779541 811.016482 658.879232 802.205449 619.10784 767.734955 542.989056 701.759633 0 212.052267 0 212.052267L0 942.809523C0 942.809523 0 1024 83.726336 1024L682.532949 1024 753.579947 1024 1348.948139 1024C1432.688811 1024 1432.688811 942.809523 1432.688811 942.809523L1432.688811 212.052267C1432.688811 212.052267 893.138176 701.759633 817.019477 767.734955 777.248 802.205449 742.347691 811.03081 718.063616 811.603883L718.063616 811.603883Z"></path>
</svg>

    </a>
  
    <a href="https://github.com/LittleThinking" rel="me noopener" class="iconfont"
      title="github"  target="_blank"
      >
      <svg class="icon" style="" viewBox="0 0 1024 1024" version="1.1"
  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
  width="36" height="36">
  <path d="M512 12.672c-282.88 0-512 229.248-512 512 0 226.261333 146.688 418.133333 350.08 485.76 25.6 4.821333 34.986667-11.008 34.986667-24.618667 0-12.16-0.426667-44.373333-0.64-87.04-142.421333 30.890667-172.458667-68.693333-172.458667-68.693333C188.672 770.986667 155.008 755.2 155.008 755.2c-46.378667-31.744 3.584-31.104 3.584-31.104 51.413333 3.584 78.421333 52.736 78.421333 52.736 45.653333 78.293333 119.850667 55.68 149.12 42.581333 4.608-33.109333 17.792-55.68 32.426667-68.48-113.706667-12.8-233.216-56.832-233.216-253.013333 0-55.893333 19.84-101.546667 52.693333-137.386667-5.76-12.928-23.04-64.981333 4.48-135.509333 0 0 42.88-13.738667 140.8 52.48 40.96-11.392 84.48-17.024 128-17.28 43.52 0.256 87.04 5.888 128 17.28 97.28-66.218667 140.16-52.48 140.16-52.48 27.52 70.528 10.24 122.581333 5.12 135.509333 32.64 35.84 52.48 81.493333 52.48 137.386667 0 196.693333-119.68 240-233.6 252.586667 17.92 15.36 34.56 46.762667 34.56 94.72 0 68.522667-0.64 123.562667-0.64 140.202666 0 13.44 8.96 29.44 35.2 24.32C877.44 942.592 1024 750.592 1024 524.672c0-282.752-229.248-512-512-512"></path>
</svg>

    </a>
  
    <a href="https://weibo.com/5287489047/" rel="me noopener" class="iconfont"
      title="weibo"  target="_blank"
      >
      <svg class="icon" viewBox="0 0 1024 1024" version="1.1"
  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
  width="36" height="36">
  <path d="M385.714286 733.714286q12-19.428571 6.285714-39.428571t-25.714286-28.571429q-19.428571-8-41.714286-0.571429t-34.285714 26.285714q-12.571429 19.428571-7.428571 39.142857t24.571429 28.857143 42.571429 1.428571 35.714286-27.142857zm53.714286-69.142857q4.571429-7.428571 2-15.142857t-10-10.571429q-8-2.857143-16.285714 2.857143t-12.285714 10.571429q-9.714286 17.714286 7.428571 25.714286 8 2.857143 16.571429 2.857143t12.571429-10.571429zm99.428571 61.142857q-25.714286 58.285714-90.285714 85.714286t-128 6.857143q-61.142857-19.428571-84.285714-72.285714t3.714286-107.142857q26.857143-53.142857 86.571429-79.428571t120.285714-10.857143q63.428571 16.571429 90.571429 68.285714t1.428571 108.857143zm178.285714-91.428571q-5.142857-54.857143-50.857143-97.142857t-119.142857-62.285714-156.857143-12q-127.428571 13.142857-211.142857 80.857143t-75.714286 151.142857q5.142857 54.857143 50.857143 97.142857t119.142857 62.285714 156.857143 12q127.428571-13.142857 211.142857-80.857143t75.714286-151.142857zm176 2.285714q0 38.857143-21.142857 79.714286t-62.285714 78.285714-96.285714 67.142857-129.142857 47.428571-154.571429 17.714286-157.142857-19.142857-137.428571-53.142857-98-86.285714-37.142857-114q0-65.714286 39.714286-140t112.857143-147.428571q96.571429-96.571429 195.142857-134.857143t140.857143 4q37.142857 36.571429 11.428571 119.428571-2.285714 8-0.571429 11.428571t5.714286 4 8.285714 2.857143 7.714286-2l3.428571-1.142857q79.428571-33.714286 140.571429-33.714286t87.428571 34.857143q25.714286 36 0 101.714286-1.142857 7.428571-2.571429 11.428571t2.571429 7.142857 6.857143 4.285714 9.714286 3.428571q32.571429 10.285714 58.857143 26.857143t45.714286 46.571429 19.428571 66.571429zm-42.285714-356.571429q24 26.857143 31.142857 62t-3.714286 67.142857q-4.571429 13.142857-16.857143 19.428571t-25.428571 2.285714q-13.142857-4.571429-19.428571-16.857143t-2.285714-25.428571q11.428571-36-13.714286-63.428571t-61.142857-20q-13.714286 2.857143-25.714286-4.571429t-14.285714-21.142857q-2.857143-13.714286 4.571429-25.428571t21.142857-14.571429q34.285714-7.428571 68 3.142857t57.714286 37.428571zm103.428571-93.142857q49.714286 54.857143 64.285714 127.142857t-7.714286 138q-5.142857 15.428571-19.428571 22.857143t-29.714286 2.285714-22.857143-19.428571-2.857143-29.714286q16-46.857143 5.714286-98.285714t-45.714286-90.285714q-35.428571-39.428571-84.571429-54.571429t-98.857143-4.857143q-16 3.428571-29.714286-5.428571t-17.142857-24.857143 5.428571-29.428571 24.857143-16.857143q70.285714-14.857143 139.428571 6.571429t118.857143 76.857143z"></path>
</svg>

    </a>
  
    <a href="https://www.zhihu.com/people/littlethink" rel="me noopener" class="iconfont"
      title="zhihu"  target="_blank"
      >
      <svg class="icon" viewBox="0 0 1024 1024" version="1.1"
  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
  width="36" height="36">
  <path d="M351.791182 562.469462l192.945407 0c0-45.367257-21.3871-71.939449-21.3871-71.939449L355.897709 490.530013c3.977591-82.182744 7.541767-187.659007 8.816806-226.835262l159.282726 0c0 0-0.86367-67.402109-18.578124-67.402109s-279.979646 0-279.979646 0 16.850783-88.141456 39.318494-127.053698c0 0-83.60514-4.510734-112.121614 106.962104S81.344656 355.077018 76.80834 367.390461c-4.536316 12.313443 24.62791 5.832845 36.941354 0 12.313443-5.832845 68.050885-25.924439 84.252893-103.69571l86.570681 0c1.165546 49.28652 4.596691 200.335724 3.515057 226.835262L109.86113 490.530013c-25.275663 18.147312-33.701566 71.939449-33.701566 71.939449L279.868105 562.469462c-8.497535 56.255235-23.417339 128.763642-44.275389 167.210279-33.05279 60.921511-50.55235 116.65793-169.802314 212.576513 0 0-19.442818 14.257725 40.829917 9.073656 60.273758-5.185093 117.305683-20.739347 156.840094-99.807147 20.553105-41.107233 41.805128-93.250824 58.386782-146.138358l-0.055259 0.185218 167.855986 193.263655c0 0 22.035876-51.847855 5.832845-108.880803L371.045711 650.610918l-42.1244 31.157627-0.045025 0.151449c11.69946-41.020252 20.11206-81.5749 22.726607-116.858498C351.665315 564.212152 351.72876 563.345412 351.791182 562.469462z"></path>
  <path d="M584.918753 182.033893l0 668.840094 70.318532 0 28.807093 80.512708 121.875768-80.512708 153.600307 0L959.520453 182.033893 584.918753 182.033893zM887.150192 778.934538l-79.837326 0-99.578949 65.782216-23.537066-65.782216-24.855084 0L659.341766 256.673847l227.807403 0L887.149169 778.934538z"></path>
</svg>

    </a>


<a href="https://littlethinking.cn/index.xml" rel="noopener alternate" type="application/rss&#43;xml"
    class="iconfont" title="rss" target="_blank">
    <svg class="icon" viewBox="0 0 1024 1024" version="1.1"
  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
  width="30" height="30">
  <path d="M819.157333 1024C819.157333 574.592 449.408 204.8 0 204.8V0c561.706667 0 1024 462.293333 1024 1024h-204.842667zM140.416 743.04a140.8 140.8 0 0 1 140.501333 140.586667A140.928 140.928 0 0 1 140.074667 1024C62.72 1024 0 961.109333 0 883.626667s62.933333-140.544 140.416-140.586667zM678.784 1024h-199.04c0-263.210667-216.533333-479.786667-479.744-479.786667V345.173333c372.352 0 678.784 306.517333 678.784 678.826667z"></path>
</svg>

  </a>
   
</div>

<div class="copyright">
  <span class="power-by">
    Powered by <a class="hexo-link" href="https://gohugo.io">Hugo</a>
  </span>
  <span class="division">|</span>
  <span class="theme-info">
    Theme - <a class="theme-link" href="https://github.com/xianmin/hugo-theme-jane">Jane</a>
  </span>

  <span class="copyright-year">
    &copy;
    
      2019 -
    2021
    <span class="heart">
      
      <i class="iconfont">
        <svg class="icon" viewBox="0 0 1025 1024" version="1.1"
  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
  width="14" height="14">
  <path d="M1000.1 247.9c-15.5-37.3-37.6-70.6-65.7-98.9-54.4-54.8-125.8-85-201-85-85.7 0-166 39-221.4 107.4C456.6 103 376.3 64 290.6 64c-75.1 0-146.5 30.4-201.1 85.6-28.2 28.5-50.4 61.9-65.8 99.3-16 38.8-24 79.9-23.6 122.2 0.7 91.7 40.1 177.2 108.1 234.8 3.1 2.6 6 5.1 8.9 7.8 14.9 13.4 58 52.8 112.6 102.7 93.5 85.5 209.9 191.9 257.5 234.2 7 6.1 15.8 9.5 24.9 9.5 9.2 0 18.1-3.4 24.9-9.5 34.5-30.7 105.8-95.9 181.4-165 74.2-67.8 150.9-138 195.8-178.2 69.5-57.9 109.6-144.4 109.9-237.3 0.1-42.5-8-83.6-24-122.2z"
   fill="#8a8a8a"></path>
</svg>

      </i>
    </span><span class="author">
        xiaohu
        
      </span></span>

  
  

  
</div>

    </footer>

    <div class="back-to-top" id="back-to-top">
      <i class="iconfont">
        
        <svg class="icon" viewBox="0 0 1024 1024" version="1.1"
  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
  width="35" height="35">
  <path d="M510.866688 227.694839 95.449397 629.218702l235.761562 0-2.057869 328.796468 362.40389 0L691.55698 628.188232l241.942331-3.089361L510.866688 227.694839zM63.840492 63.962777l894.052392 0 0 131.813095L63.840492 195.775872 63.840492 63.962777 63.840492 63.962777zM63.840492 63.962777"></path>
</svg>

      </i>
    </div>
  </div>
  
<script type="text/javascript" src="/lib/jquery/jquery-3.2.1.min.js"></script>
  <script type="text/javascript" src="/lib/slideout/slideout-1.0.1.min.js"></script>




<script type="text/javascript" src="/js/main.dee43230127a73d039a734510fa896c89c3c7ce0cf0be0c7a7433f8fd69b76dc.js" integrity="sha256-3uQyMBJ6c9A5pzRRD6iWyJw8fODPC&#43;DHp0M/j9abdtw=" crossorigin="anonymous"></script>



  <script type="text/javascript">
    window.MathJax = {
      showProcessingMessages: false,
      messageStyle: 'none'
    };
  </script>
  <script src='https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.4/MathJax.js?config=TeX-MML-AM_CHTML' async></script>









  
    <script type="text/javascript" src="/js/load-photoswipe.js"></script>
    <script type="text/javascript" src="/lib/photoswipe/photoswipe.min.js"></script>
    <script type="text/javascript" src="/lib/photoswipe/photoswipe-ui-default.min.js"></script>
  















</body>
</html>
